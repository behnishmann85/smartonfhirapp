{% extends 'layout.html' %}
  {% block content %}

  <h2>Patient Clinical Summary</h2>
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    {% for key in data %}
    <li class="nav-item" role="presentation">
      <button class="nav-link {% if loop.first %}active{% endif %}" id="{{ key }}-tab" data-bs-toggle="tab" data-bs-target="#{{ key }}" type="button" role="tab">{{ key }}</button>
    </li>
    {% endfor %}
  </ul>

  <div class="tab-content mt-3" id="myTabContent">
    {% for key, resources in data.items() %}
    <div class="tab-pane fade {% if loop.first %}show active{% endif %}" id="{{ key }}" role="tabpanel">
      <div class="mb-3">
        <a href="/new/{{ patient_id }}/{{ key|lower }}" class="btn btn-sm btn-success">
        âž• Add {{ key }}
        </a>
      </div>
      <ul class="list-group">
      {% for item in resources %}
        <li class="list-group-item">
          <strong>ID:</strong> {{ item['id'] }} <br>
          <pre>{{ item.to_dict() | tojson(indent=2) }}</pre>
          <form action="/patient/{{ patient_id }}/{{ key|lower }}/delete/{{ item['id'] }}" method="POST" style="display:inline-block;">
            <button class="btn btn-sm btn-danger" onclick="return confirm('Delete this resource?')">Delete</button>
          </form>
          <a href="/patient/{{ patient_id }}/{{ key|lower }}/edit/{{ item['id'] }}" class="btn btn-sm btn-warning">Edit</a>
        </li>
      {% else %}
        <li class="list-group-item text-muted">No {{ key }} found.</li>
      {% endfor %}
    </ul>
    </div>
    {% endfor %}
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
      {% endblock %}